# main関数

改めて、前章で入力したプログラムを見てみましょう。

- main.cpp

    ```
    int main() {
        return 0;
    }

    ```

まず、int main()が書かれた行に注目しましょう。
C++では、この行から処理が開始されることになっています。
次に、return 0;が書かれた行に注目しましょう。
この箇所は「プログラムを終了せよ」という命令を示しています。
これが実行されることで、プログラムが終了するのです。

ここで、return 0;は{}（中かっこ）に囲まれて記述されているのがわかります。
この{}で囲まれた箇所を「ブロック」と呼びます。
int main() からブロックまでの箇所を「main関数」と呼びます。

# トークンと文

「トークン」とは、英語などで言う単語のことです。
英語は一つ一つの単語で構成されているように、C++もトークンで構成されているのです。
先ほどのプログラムで、トークンを半角スペースで区切ると以下の通りになります。

- main.cpp

    ```
    int main ( ) { return 0 ; }

    ```

トークンは半角スペース、改行、タブで区切ることができます。
実際に、末尾を改行して最後の行を空行にしておけば、この状態でも正常にコンパイルが行えます。
一方で、intmainのように複数のトークンをくっつけたり、re turnのように無理やりトークンを別々にしたりすると、エラーが出てコンパイルが行えなくなります。
ただし、記号もトークンを区切る目印になるため、記号をつなげて記述しても問題ありません。

- main.cpp

    ```
    int main(){return 0;}

    ```

また、トークンは大文字と小文字を区別します。
例えば、mainをMAINとしたりMainとしたりすると、トークンが異なるためコンパイルが行えなくなります。

「文」とは、プログラム上に書かれた命令文のことです。
return 0;のように、文には必ず末尾に;（セミコロン）をつけなければなりません。
これがないと、命令文の終わりがわからなくなってしまうため、コンパイルが行えなくなります。

- よくある間違い

    プログラムの記述に慣れていないうちは、

    - {}を閉じ損ねる
    - ;を忘れる
    - 半角スペースではなく全角スペースを使ってしまう

    ということがよくあります。これらのミスをなくすことが、プログラミングの初心者から脱却する第一歩と言えるでしょう。

# インデント

先ほどのプログラムでは、main関数を1行に詰め込んで記述していました。

- main.cpp

    ```
    int main() { return 0; }

    ```

そのままコンパイルして実行することができますが、さすがに読みにくいでしょう。
そこで、文を行別になるように改行して、行頭にタブか4つの半角スペースを入力してみましょう。

- main.cpp

    ```
    int main() {
        return 0;
    }

    ```

行頭に、タブ文字もしくは半角スペースを挿入した箇所を「インデント」もしくは「字下げ」と呼びます。
インデントを積極的に使って、読みやすいプログラムを書くように心がけましょう。

- 自動的にインデント

    Visual Studioでは、改行を行うと自動的にタブが挿入されて、インデントが行われるようになっています。

# コメント

プログラムは複雑になればなるほど、読みにくくなります。
今回のプログラムは比較的単純なものであるため、一見しただけでどんなプログラムなのかはわかります。
しかし、プログラムの内容が複雑になっていくと、読んでもよくわからないプログラムが出来上がってしまいます。

そのため、プログラムの中に説明やメモなどを書き込める機能が用意されています。
この機能を「コメント」と呼びます。コンパイルを行う際、コメントの箇所は無視されます。
C++では「一行コメント」と「複数行コメント」の2種類のコメントが用意されています。

まずは、一行コメントの書き方を見てみましょう。
一行コメントは、/（スラッシュ）を2つ続けて記述します。
// から行末までを、コメントとすることができます。

- main.cpp

    ```
    // これから処理をどんどん追加していきます
    int main() {
        return 0; // ここでプログラムを終了します
    }

    ```

複数行コメントの書き方を見てみましょう。
/* から */ までの箇所をコメントとすることできます。

- main.cpp

    ```
    /*
    間に挟まれていれば
    何行でもコメントにすることができます
    */
    int main() {
        return 0;
    }

    ```

実は、プログラムを書いた本人ですら、ひと月も経てばプログラムの内容を忘れてしまうことは少なくありません。
ここはすぐに忘れそうだなと感じたり、読んで理解できるか怪しいと感じたりしたら、コメントを書くようにしましょう。

- 全角文字が使える箇所

    これまでは、ソースコードは必ず半角文字で書いていました。
    しかし、コメントは半角文字だけでなく全角文字も使用することができます。
    後述する文字列に関しても同様です。

# 画面に文字列を出力するには

いよいよ、画面に文字列を出力する処理を書きこんで行きましょう。
「文字列」とは単に文字を羅列したものです。
まずは、以下のプログラムを実行してみましょう。

- main.cpp

    ```
    #include <iostream>

    int main() {
        // 画面に文字列を出力する処理です
        std::cout << "こんにちは";
        return 0;
    }

    ```

- 実行結果

    ```
    こんにちは
    ```

最初に、一行目の#includeが書かれた行を見てみましょう。
include は英語で含めるという意味で、iostream は文字列や数値などを「標準出力」に出力したり「標準入力」から入力したりする機能が記述されたファイルの名前を指します。
通常、標準出力はプログラムの実行時に表示される画面のことを指し、標準入力はキーボードのことを指します。

- 標準入力と標準出力の変更

    標準入力と標準出力はそれぞれ、別の装置やテキストファイルなどに変更することができます。
    この機能を「リダイレクト」と呼びます。

#から始まる行を「前処理命令」と呼び、文と違って;をつけずに記述します。
また、ファイルを前処理命令で読み込むことを「インクルード」と呼びます。

次に、main関数のブロック内を見てみましょう。
std::coutから始まる行は、文字列を画面に出力するための命令です。
書き方は以下の通りです。

```
std::cout << "出力したい文字列";
```

それでは、先ほどのプログラムにさらに以下のように処理を書き足してみましょう。

- main.cpp

    ```
    #include <iostream>

    int main() {
        // 画面に文字列を出力する処理です
        std::cout << "こんにちは";
        std::cout << "こんばんわ";
        return 0;
        std::cout << "これは表示される？";
    }

    ```

- 実行結果

    ```
    こんにちはこんばんわ
    ```

プログラムは原則として、上の行から順番に処理されていきます。
このため「こんにちは」の後に「こんばんわ」と表示されるのです。
また、return 0;の行が実行された時点でプログラムが終了してしまうため、これ以降の文は実行されません。
プログラムを書き上げたら上から順に読んでいって、正常に動作するか確認するようにしましょう。

# リテラル

「リテラル」とは、'a' のような文字、"ようこそ" のような文字列、100や3.14のような数値などをソースコード上に表記したものです。
リテラルには複数の種類があり、その種類によって表記方法に違いがあります。

| 種別 | 種類 | 意味 | 囲む記号 | 表記例 |
| :-- | :-- | :-- | :-- | :-- |
| 文字 | 文字リテラル | 半角文字1字 | ' | 'a' |
| 文字列 | 文字列リテラル | 文字の羅列 | " | "aeiou" |
| 数値 | 整数リテラル | 整数 | (なし) | 12345 |
| 数値 | 浮動小数点数リテラル | 浮動小数点数 | (なし) | 3.14 |
| 論理 | 論理リテラル | 正か偽の2択 | (なし) | true, false |

- 文字と文字列は別物

    表にもまとめてあるように、文字は半角文字1字のことであるのに対し、文字列は文字の羅列のことです。
    混乱しないように注意しましょう。
    文字列リテラルは、中身が何もなかったり、複数の文字が入っていたり、全角文字が入っていたりしてはいけません。
    一方で文字列リテラルは、中身に何文字でも入れられる上、中身が空であっても構いません。

画面に出力できるのは、文字列だけではありません。文字も数値も出力できます。
以下のプログラムを実行してみて、文字列リテラル以外でも画面に出力できることを確かめてみましょう。

- main.cpp

    ```
    #include <iostream>

    int main(void) {
        // 文字
        std::cout << 'a';
        // 文字列
        std::cout << "ようこそ";
        // 整数
        std::cout << 100;
        // 浮動小数点数
        std::cout << 3.14;
        return 0;
    }

    ```

- 実行結果

    ```
    aようこそ1003.14
    ```

# エスケープシーケンス

先ほどのプログラムでは、出力した文字列などが一行で表示されています。

```
aようこそ1003.14
```

これでは、文字がくっついているため読みにくいでしょう。
任意に改行ができれば、実行結果が読みやすいプログラムに仕上げられるでしょう。
しかし、改行は通常の文字で表記することはできません。
そこで、このような文字を\（円記号もしくはバックスラッシュ）と文字（もしくは数値）の組み合わせを用いて表記する機能が用意されています。
これを「エスケープシーケンス」と呼びます。
エスケープシーケンスには以下のようなものがあります。

| エスケープシーケンス | 意味 |
| :-- | :-- |
| \b | バックスペース |
| \n | 改行 |
| \r | 復帰 |
| \t | 水平タブ |
| \\\ | \ |
| \\" | " |
| \\' | ' |
| \\? | ? |

もし、文字列などを改行したければ、\nを用いれば良い訳です。
std::coutの行で最後に\nを挿入することで、文ごとに改行されて表示されるようになります。

- main.cpp

    ```
    #include <iostream>

    int main(void) {
        std::cout << 'a' << '\n';
        std::cout << "ようこそ" << '\n';
        std::cout << 100 << '\n';
        std::cout << 3.14 << '\n';
        return 0;
    }

    ```

- 実行結果

    ```
    a
    ようこそ
    100
    3.14
    ```

他のエスケープシーケンスも使ってみましょう。

- main.cpp

    ```
    #include <iostream>

    int main(void) {
        std::cout << "abc\tdef" << '\n';
        std::cout << "gh\tij" << '\n';
        std::cout << "\'\"" << '\n';
        return 0;
    }

    ```

- 実行結果

    ```
    abc     def
    gh      ij
    '"
    ```

エスケープシーケンスが表記できるのは、文字リテラルか文字列リテラルのいずれかです。
慣れないうちは文字列リテラルにエスケープシーケンスがあるのは違和感があると思いますが、これにより様々な表現が可能となります。
